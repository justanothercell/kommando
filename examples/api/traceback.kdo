use std::*;
use std::trace::Traceback;

fn baz() {
    let tb = Traceback::<>::collect_allocated();
    tb.fprint_trace(std::io::stdout);
    tb.free();
}

// we do not want a vampire in our trace
#[no_trace]
fn vampire() {
    baz();
}

fn bar() {
    vampire();
}

fn fou() {
    bar();
}

fn foo() {
    let f = fou;
    (f)();
}

fn main() {
    foo();
}